"use strict";function t(t){return null==t?[]:void 0!==t.length?Array.prototype.slice.call(t):[t]}function n(t,n){if(null!=t&&null!=n)if(t.complete)n(t,t.naturalWidth,t.naturalHeight);else{var e=t.src||t;if("string"!=typeof e)return;var r=new Image;r.onload=function(){n(t,r.naturalWidth,r.naturalHeight)},r.src=e}}function e(t,n){var e=Math.random()*(n||1);return Math.random()*(1-e)+t*e}var r="http://www.w3.org/2000/svg",i="http://www.w3.org/1999/xlink",l="http://www.w3.org/2000/xmlns/";function a(t,n,e){var r=void 0!==e?document.createElementNS(e,t):document.createElement(t);if(null!=n){var i=void 0,l=void 0;for(i in n)l=n[i],Array.isArray(l)?r.setAttributeNS(l[0]||null,i,l[1]):r.setAttribute(i,l)}return r}var o=function(t){return"string"==typeof t?t.split(/\s+/):t||[]};function s(t,n){return t.classList?t.classList.contains(n):!!(t.className.indexOf(n)>-1)}function u(t,n){var e=o(n);if(t.classList)t.classList.add.apply(t.classList,e);else{for(var r=t.className,i=0;i<e.length;i++)r.indexOf(e[i])<0&&(r+=" "+e[i]);t.className=r}}function c(t,n){var e=o(n);if(t.classList)t.classList.remove.apply(t.classList,e);else{for(var r=o(t.className),i="",l=0;l<r.length;l++)e.indexOf(r[l])<0&&(i+=" "+r[l]);t.className=i.substring(1)}}function h(t){if(null==t)return null;for(;t.firstChild;)t.removeChild(t.firstChild);return t}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=a("svg",{"xmlns:xlink":[l,i],preserveAspectRatio:[null,"none"],viewBox:"0 0 "+t.width+" "+t.height,class:t.class},r),e=a("image",{"clip-path":"url(#"+t.id+")",href:[i,t.src],width:[null,"100%"],height:[null,"100%"]},r);return n.appendChild(e),n}function f(t,n){if(!t||!t.src||s(t,n.classes.image))return this.element=null;var e=n.hashId();this.element=t,this.width=t.naturalWidth||100,this.height=t.naturalHeight||100,this.defs=n,u(t,n.classes.image);var i=a("div",{class:n.classes.wrapper}),l=d({src:t.src,width:this.width,height:this.height,class:n.classes.clone,id:e});t.parentElement.insertBefore(i,t),i.appendChild(t),i.appendChild(l),this.clipPath=a("clipPath",{id:e},r),n.element.appendChild(this.clipPath),this.update()}f.prototype={destroy:function(){if(null!=this.element){c(this.element,this.defs.classes.image);var t=this.element.parentElement;t.parentElement.insertBefore(this.element,t),t.parentElement.removeChild(t),this.defs.element.removeChild(this.clipPath),this.element=null,this.clipPath=null,this.defs=null}return null},update:function(){if(null==this.element)return this;var t=.3*this.height,n=0,i=void 0,l=void 0;for(h(this.clipPath),l=document.createDocumentFragment();n<=this.height;)i=Math.round(e(.01)*t),n+=Math.round(e(.01)*t)+i,l.appendChild(a("rect",{x:[null,"0"],y:[null,n],height:[null,i],width:[null,this.width]},r));return this.clipPath.appendChild(l),this}};var p="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function v(t,n){return t(n={exports:{}},n.exports),n.exports}var g=v(function(t){!function(n){function e(t,n){var e=(65535&t)+(65535&n);return(t>>16)+(n>>16)+(e>>16)<<16|65535&e}function r(t,n,r,i,l,a){return e((o=e(e(n,t),e(i,a)))<<(s=l)|o>>>32-s,r);var o,s}function i(t,n,e,i,l,a,o){return r(n&e|~n&i,t,n,l,a,o)}function l(t,n,e,i,l,a,o){return r(n&i|e&~i,t,n,l,a,o)}function a(t,n,e,i,l,a,o){return r(n^e^i,t,n,l,a,o)}function o(t,n,e,i,l,a,o){return r(e^(n|~i),t,n,l,a,o)}function s(t,n){var r,s,u,c,h;t[n>>5]|=128<<n%32,t[14+(n+64>>>9<<4)]=n;var d=1732584193,f=-271733879,p=-1732584194,v=271733878;for(r=0;r<t.length;r+=16)s=d,u=f,c=p,h=v,f=o(f=o(f=o(f=o(f=a(f=a(f=a(f=a(f=l(f=l(f=l(f=l(f=i(f=i(f=i(f=i(f,p=i(p,v=i(v,d=i(d,f,p,v,t[r],7,-680876936),f,p,t[r+1],12,-389564586),d,f,t[r+2],17,606105819),v,d,t[r+3],22,-1044525330),p=i(p,v=i(v,d=i(d,f,p,v,t[r+4],7,-176418897),f,p,t[r+5],12,1200080426),d,f,t[r+6],17,-1473231341),v,d,t[r+7],22,-45705983),p=i(p,v=i(v,d=i(d,f,p,v,t[r+8],7,1770035416),f,p,t[r+9],12,-1958414417),d,f,t[r+10],17,-42063),v,d,t[r+11],22,-1990404162),p=i(p,v=i(v,d=i(d,f,p,v,t[r+12],7,1804603682),f,p,t[r+13],12,-40341101),d,f,t[r+14],17,-1502002290),v,d,t[r+15],22,1236535329),p=l(p,v=l(v,d=l(d,f,p,v,t[r+1],5,-165796510),f,p,t[r+6],9,-1069501632),d,f,t[r+11],14,643717713),v,d,t[r],20,-373897302),p=l(p,v=l(v,d=l(d,f,p,v,t[r+5],5,-701558691),f,p,t[r+10],9,38016083),d,f,t[r+15],14,-660478335),v,d,t[r+4],20,-405537848),p=l(p,v=l(v,d=l(d,f,p,v,t[r+9],5,568446438),f,p,t[r+14],9,-1019803690),d,f,t[r+3],14,-187363961),v,d,t[r+8],20,1163531501),p=l(p,v=l(v,d=l(d,f,p,v,t[r+13],5,-1444681467),f,p,t[r+2],9,-51403784),d,f,t[r+7],14,1735328473),v,d,t[r+12],20,-1926607734),p=a(p,v=a(v,d=a(d,f,p,v,t[r+5],4,-378558),f,p,t[r+8],11,-2022574463),d,f,t[r+11],16,1839030562),v,d,t[r+14],23,-35309556),p=a(p,v=a(v,d=a(d,f,p,v,t[r+1],4,-1530992060),f,p,t[r+4],11,1272893353),d,f,t[r+7],16,-155497632),v,d,t[r+10],23,-1094730640),p=a(p,v=a(v,d=a(d,f,p,v,t[r+13],4,681279174),f,p,t[r],11,-358537222),d,f,t[r+3],16,-722521979),v,d,t[r+6],23,76029189),p=a(p,v=a(v,d=a(d,f,p,v,t[r+9],4,-640364487),f,p,t[r+12],11,-421815835),d,f,t[r+15],16,530742520),v,d,t[r+2],23,-995338651),p=o(p,v=o(v,d=o(d,f,p,v,t[r],6,-198630844),f,p,t[r+7],10,1126891415),d,f,t[r+14],15,-1416354905),v,d,t[r+5],21,-57434055),p=o(p,v=o(v,d=o(d,f,p,v,t[r+12],6,1700485571),f,p,t[r+3],10,-1894986606),d,f,t[r+10],15,-1051523),v,d,t[r+1],21,-2054922799),p=o(p,v=o(v,d=o(d,f,p,v,t[r+8],6,1873313359),f,p,t[r+15],10,-30611744),d,f,t[r+6],15,-1560198380),v,d,t[r+13],21,1309151649),p=o(p,v=o(v,d=o(d,f,p,v,t[r+4],6,-145523070),f,p,t[r+11],10,-1120210379),d,f,t[r+2],15,718787259),v,d,t[r+9],21,-343485551),d=e(d,s),f=e(f,u),p=e(p,c),v=e(v,h);return[d,f,p,v]}function u(t){var n,e="",r=32*t.length;for(n=0;n<r;n+=8)e+=String.fromCharCode(t[n>>5]>>>n%32&255);return e}function c(t){var n,e=[];for(e[(t.length>>2)-1]=void 0,n=0;n<e.length;n+=1)e[n]=0;var r=8*t.length;for(n=0;n<r;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e}function h(t){return u(s(c(t),8*t.length))}function d(t,n){var e,r,i=c(t),l=[],a=[];for(l[15]=a[15]=void 0,i.length>16&&(i=s(i,8*t.length)),e=0;e<16;e+=1)l[e]=909522486^i[e],a[e]=1549556828^i[e];return r=s(l.concat(c(n)),512+8*n.length),u(s(a.concat(r),640))}function f(t){var n,e,r="";for(e=0;e<t.length;e+=1)n=t.charCodeAt(e),r+="0123456789abcdef".charAt(n>>>4&15)+"0123456789abcdef".charAt(15&n);return r}function p(t){return unescape(encodeURIComponent(t))}function v(t){return h(p(t))}function g(t,n){return d(p(t),p(n))}function m(t,n,e){return n?e?g(n,t):f(g(n,t)):e?v(t):f(v(t))}t.exports?t.exports=m:n.md5=m}(p)});function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return g(t,Date.now()).slice(0,n)}var w="data-glitch-img",y=function(t){return["."+t.wrapper+"{\n        position: relative;\n        overflow: hidden;\n        display: inline-block;\n        vertical-align: top;\n    }","."+t.image+"{\n        display: block;\n    }","."+t.clone+"{\n        position: absolute;\n        top: 0; left: 0;\n        width: 100%; height: 100%;\n        -webkit-transform: translate(-2%, 0);\n                transform: translate(-2%, 0);\n    }"]};function C(t,n){n.forEach(function(n,e){t.insertRule(n,e)})}function x(t){var n=document.createElement("style");return document.head.appendChild(n),C(n.sheet,y(t)),n.setAttribute(w,""),n}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=0,e=a("svg",{xmlns:r},r),i=a("defs",null,r);e.appendChild(i),document.body.appendChild(e);var l=x(t);return{classes:t,element:i,hashId:function(){return"gi-"+m("glitch"+n++,10)},options:function(n){if(null!=n){var e=0;Object.keys(n).forEach(function(r){t[r]&&n[r]!==t[r]&&(t[r]=n[r],e++)}),e>0&&(document.head.removeChild(l),l=x(t))}}}}var A=b({wrapper:"gi-wrapper",image:"gi-image",clone:"gi-clone"});function E(e){var r=[];t(e).forEach(function(t){n(t,function(){return r.push(new f(t,A))})});var i={destroy:function(){return r.forEach(function(t){return t.destroy()}),r=null,null},update:function(){if(null!=r)for(var t=-1,n=r.length;++t<n;)r[t].update();return i}};return i}E.options=A.options,module.exports=E;
